"0","grouped_gallons <- alcohol %>%"
"0","  group_by(Year,FIPS) %>% "
"0","  summarise(gallons = sum(Gallons))"
"2","`summarise()` has grouped output by 'Year'. You can override using the `.groups` argument.
"
"0","cum_perc_gallons <- grouped_gallons %>%  "
"0","  group_by(Year) %>% "
"0","  mutate(tot_year = sum(gallons)) %>% "
"0","  ungroup() %>% "
"0","  mutate(tot_prc = (gallons/tot_year)*100) %>% "
"0","  arrange(Year,desc(tot_prc)) %>% "
"0","  group_by(Year) %>% "
"0","  mutate(cum_prc = cumsum(tot_prc)) %>% "
"0","  ungroup() %>% "
"0","  arrange(Year, desc(cum_prc))"
"0",""
"0",""
"0","cum_perc_gallons %>% "
"0","  filter(Year == 2019) %>% "
"0","  ggplot() +"
"0","  geom_bar(aes(x = reorder(FIPS,-tot_prc), y = tot_prc, "
"0","               fill = Year), alpha = 0.6, stat = ""identity"") +"
"0","  geom_point(aes(x = FIPS, y = cum_prc, "
"0","                color = Year), alpha = 0.6) +"
"0","  geom_path(aes(x = FIPS,y = cum_prc, group = 1, "
"0","                color = Year), alpha = 0.6) +"
"0","   facet_wrap(~Year, nrow = 2, ncol = 2) +"
"0","  scale_color_npg() +"
"0","  scale_fill_npg() +"
"0","  theme_minimal() +"
"0","  theme(axis.text.x = element_text(angle = 90, vjust=0)) +"
"0","  ggtitle(""Cumulative percentage of gallons of alcohol consumed"") +"
"0","  xlab(""State"") +"
"0","  ylab(""% of gallons"")"
